(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{924:function(t,s,a){"use strict";a.r(s);var e=a(114),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"图片文件上传组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图片文件上传组件"}},[t._v("#")]),t._v(" 图片文件上传组件")]),t._v(" "),a("hr"),t._v(" "),a("common-code-format",[a("docsComponents-UploadFile-index"),t._v(" "),a("highlight-code",{attrs:{slot:"codeText"},slot:"codeText"},[a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('<template>\n    <div class="upload-file-demo" style="min-height:100px;width:100%;padding:10px;">\n      <div v-for="checkedItem in checkedList" :key="checkedItem.type">\n        <upload-file\n          :attachmentType="checkedItem.type"\n          @uploadSuccess="pushUploadItem"\n          @deleteSuccess="pushUploadItem"\n        />\n      </div>\n    </div>\n</template>\n<script>\n    export default {\n         data () {\n          return {\n            fmFileList: [],\n            uploadObj: {},\n            checkedList: [\n              {\n                check: true,\n                type: \'001\'\n              },\n              {\n                check: true,\n                type: \'002\'\n              },\n              {\n                check: true,\n                type: \'003\'\n              }\n            ]\n          }\n        },\n        // 方法\n        methods: {\n            pushUploadItem (val, attachmentType) {\n            console.log(val, attachmentType)\n            let attachmentNo = val.res\n            this.uploadObj[attachmentType] = attachmentNo\n            if (!this.uploadObj[attachmentType] || this.uploadObj[attachmentType].length === 0) {\n              delete this.uploadObj[attachmentType]\n            }\n            let tempFileList = []\n            for (let key of Object.keys(this.uploadObj)) {\n              let uploadListItem = {\n                attachmentNo: this.uploadObj[key],\n                attachmentType: key\n              }\n              tempFileList.push(uploadListItem)\n            }\n            this.fmFileList = tempFileList\n          }\n        }\n    }\n<\/script>\n')])])])])],1),t._v(" "),a("h2",{attrs:{id:"_1-简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介"}},[t._v("#")]),t._v(" 1. 简介")]),t._v(" "),a("h4",{attrs:{id:"uploadfile组件（基于elementui图片控件二次封装实现图片文件上传、下载、回显、编辑功能）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uploadfile组件（基于elementui图片控件二次封装实现图片文件上传、下载、回显、编辑功能）"}},[t._v("#")]),t._v(" uploadFile组件（基于elementUI图片控件二次封装实现图片文件上传、下载、回显、编辑功能）")]),t._v(" "),a("h2",{attrs:{id:"_2-配置参数-attributes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置参数-attributes"}},[t._v("#")]),t._v(" 2. 配置参数(Attributes)")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("是否必须")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("uploadSuccess")]),t._v(" "),a("td",[t._v("上传成功的回调，结合setKey使用用于更新业务中的绑定值")]),t._v(" "),a("td",[t._v("function")]),t._v(" "),a("td",[t._v("是")])]),t._v(" "),a("tr",[a("td",[t._v("deleteSuccess")]),t._v(" "),a("td",[t._v("上传失败的回调，结合setKey使用用于更新业务中的绑定值")]),t._v(" "),a("td",[t._v("function")]),t._v(" "),a("td",[t._v("是")])]),t._v(" "),a("tr",[a("td",[t._v("setKey")]),t._v(" "),a("td",[t._v("用于更新业务中的绑定值")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("是")])]),t._v(" "),a("tr",[a("td",[t._v("action")]),t._v(" "),a("td",[t._v("原插件上传保存图片的地址弃用，改用http-request自行封装")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("multiple")]),t._v(" "),a("td",[t._v("是否可上传多个文件")]),t._v(" "),a("td",[t._v("Boolean")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("limit")]),t._v(" "),a("td",[t._v("限制上传文件个数")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("limitSize")]),t._v(" "),a("td",[t._v("限制上传文件大小默认10MB")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("saveFileType")]),t._v(" "),a("td",[t._v("保存文件类型")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("是")])]),t._v(" "),a("tr",[a("td",[t._v("fileType")]),t._v(" "),a("td",[t._v("限制上传文件类型，用逗号分开 如.jpg,.jpeg")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("disabled")]),t._v(" "),a("td",[t._v("不可编辑开关")]),t._v(" "),a("td",[t._v("Boolean")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("fileNameLimit")]),t._v(" "),a("td",[t._v("文件名字长度限制 默认50")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("editBackFile")]),t._v(" "),a("td",[t._v("是否编辑带出图片")]),t._v(" "),a("td",[t._v("Boolean")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("fileIdList")]),t._v(" "),a("td",[t._v("回显图片的id list逗号分隔")]),t._v(" "),a("td",[t._v("Array, String")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("isShowTips")]),t._v(" "),a("td",[t._v("是否显示底部提示信息")]),t._v(" "),a("td",[t._v("Boolean")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("extendTips")]),t._v(" "),a("td",[t._v("额外的提示 如果要换行用$符号分割 如'aaaaaa$bbbbb'")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("否")])])])]),t._v(" "),a("h2",{attrs:{id:"_3-结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-结构"}},[t._v("#")]),t._v(" 3. 结构")]),t._v(" "),a("h5",{attrs:{id:"_2-1-用法示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-用法示例"}},[t._v("#")]),t._v(" 2.1 用法示例")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("              "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("upload-file")]),t._v("\n                  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@uploadSuccess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("setFileId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n                  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@deleteSuccess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("updateFileId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n                  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("fileType")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v(".jpg,.jpeg,.png,.pdf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n                  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setKey")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("authLetterFileIds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n                  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("saveFileType")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n                  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("upload-file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n              "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("upload-file")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@uploadSuccess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("setFileId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@deleteSuccess")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("updateFileId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("extendTips")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1、基本账户：开户许可证+企业客户授权书。$2、一般账户：xxxx。"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("fileType")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v(".jpg,.jpeg,.png,.pdf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setKey")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("bankAcctFileId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("saveFileType")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("upload-file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n              \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])]),a("h5",{attrs:{id:"_2-3-用法示例2-回显模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-用法示例2-回显模块"}},[t._v("#")]),t._v(" 2.3 用法示例2 回显模块")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('            <upload-file \n                    disabled \n                    showOnly="true" \n                    :fileIdList="authLetterFileIds" \n                    :isShowTips="false" \n                    v-if="authLetterFileIds.length>0"\n                    ></upload-file>\n            \n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("回显图片最好使用 v-if 可以避免某些情况下回显的id未加载，等加载完控件没有触发刷新导致没有回显的问题\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h5",{attrs:{id:"_2-3-业务代码中方法示例："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-业务代码中方法示例："}},[t._v("#")]),t._v(" 2.3 业务代码中方法示例：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("@uploadSuccess=\n@deleteSuccess=\nsetKey=\n这三个字段结合使用保持上传、删除实时更新业务代码中的绑定属性(TODO:用一个属性功能代替三个)\n\nmethods: {\n  ...\n  // 图片模块 上传后记录ids\n  setFileId (data, key) {\n    this[key] = data.res\n    this.ruleForm[key] = this[key].join(',')\n  },\n  // 删除后更新ids\n  updateFileId (data, key) {\n    this[key] = data.res\n    this.ruleForm[key] = this[key].join(',')\n  }\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])])],1)}),[],!1,null,null,null);s.default=n.exports}}]);